{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\\\\shop\\\\src\\\\services\\\\VkAuth.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass VkAuth extends Component {\n  constructor(props) {\n    super(props);\n    this.checkLoginState = response => {\n      this.setState({\n        isProcessing: false\n      });\n      this.props.callback ? this.props.callback(response) : null;\n    };\n    this.handleClick = () => {\n      if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\n        return;\n      }\n      this.setState({\n        isProcessing: true\n      });\n      window.VK.Auth.login(this.checkLoginState);\n    };\n    this.state = {\n      isLoaded: false,\n      isProcessing: false\n    };\n  }\n  componentDidMount() {\n    this.asyncInit();\n    this.loadSdkAsync();\n  }\n  asyncInit() {\n    const {\n      apiId\n    } = this.props;\n    window.vkAsyncInit = () => {\n      window.VK.init({\n        apiId\n      });\n      this.setState({\n        isLoaded: true\n      });\n    };\n  }\n  sdkLoaded() {\n    this.setState({\n      isLoaded: true\n    });\n  }\n  loadSdkAsync() {\n    const el = document.createElement('script');\n    el.type = 'text/javascript';\n    el.src = 'https://vk.com/js/api/openapi.js?';\n    el.async = true;\n    el.id = 'vk-sdk';\n    document.getElementsByTagName('head')[0].appendChild(el);\n  }\n  render() {\n    const {\n      disabled,\n      callback,\n      apiId,\n      containerStyle,\n      ...buttonProps\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      style: containerStyle,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        ...buttonProps,\n        onClick: this.handleClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this);\n  }\n}\nVkAuth.propTypes = {\n  disabled: PropTypes.bool,\n  callback: PropTypes.func.isRequired,\n  apiId: PropTypes.string.isRequired,\n  containerStyle: PropTypes.object\n};\nexport default VkAuth;","map":{"version":3,"names":["React","Component","PropTypes","VkAuth","constructor","props","checkLoginState","response","setState","isProcessing","callback","handleClick","state","isLoaded","disabled","window","VK","Auth","login","componentDidMount","asyncInit","loadSdkAsync","apiId","vkAsyncInit","init","sdkLoaded","el","document","createElement","type","src","async","id","getElementsByTagName","appendChild","render","containerStyle","buttonProps","propTypes","bool","func","isRequired","string","object"],"sources":["D:/Проекты/shop/src/services/VkAuth.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass VkAuth extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoaded: false,\n            isProcessing: false,\n        }\n    }\n\n    componentDidMount() {\n        this.asyncInit();\n        this.loadSdkAsync();\n    }\n\n    asyncInit() {\n        const { apiId } = this.props;\n        window.vkAsyncInit = () => {\n        window.VK.init({ apiId });\n        this.setState({ isLoaded: true });\n        };\n    }\n\n    sdkLoaded() {\n        this.setState({ isLoaded: true });\n    }\n\n    loadSdkAsync() {\n        const el = document.createElement('script');\n        el.type = 'text/javascript';\n        el.src = 'https://vk.com/js/api/openapi.js?';\n        el.async = true;\n        el.id = 'vk-sdk';\n        document.getElementsByTagName('head')[0].appendChild(el);\n    }\n\n    checkLoginState = (response) => {\n        this.setState({ isProcessing: false });\n\n        this.props.callback ? this.props.callback(response) : null;\n    };\n\n    handleClick = () => {\n        if (!this.state.isLoaded || this.state.isProcessing || this.props.disabled) {\n        return;\n        }\n        this.setState({ isProcessing: true });\n        window.VK.Auth.login(this.checkLoginState);\n    };\n\n    render() {\n        const { disabled, callback, apiId, containerStyle, ...buttonProps } = this.props;\n        return (\n        <span style={containerStyle}>\n            <button\n            {...buttonProps}\n            onClick={this.handleClick}\n            >\n            </button >\n        </span>\n        );\n    }\n}\n\nVkAuth.propTypes = {\n  disabled: PropTypes.bool,\n  callback: PropTypes.func.isRequired,\n  apiId: PropTypes.string.isRequired,\n  containerStyle: PropTypes.object\n};\n\nexport default VkAuth;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAAC;AAEnC,MAAMC,MAAM,SAASF,SAAS,CAAC;EAE3BG,WAAW,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAAC,KAkCjBC,eAAe,GAAIC,QAAQ,IAAK;MAC5B,IAAI,CAACC,QAAQ,CAAC;QAAEC,YAAY,EAAE;MAAM,CAAC,CAAC;MAEtC,IAAI,CAACJ,KAAK,CAACK,QAAQ,GAAG,IAAI,CAACL,KAAK,CAACK,QAAQ,CAACH,QAAQ,CAAC,GAAG,IAAI;IAC9D,CAAC;IAAA,KAEDI,WAAW,GAAG,MAAM;MAChB,IAAI,CAAC,IAAI,CAACC,KAAK,CAACC,QAAQ,IAAI,IAAI,CAACD,KAAK,CAACH,YAAY,IAAI,IAAI,CAACJ,KAAK,CAACS,QAAQ,EAAE;QAC5E;MACA;MACA,IAAI,CAACN,QAAQ,CAAC;QAAEC,YAAY,EAAE;MAAK,CAAC,CAAC;MACrCM,MAAM,CAACC,EAAE,CAACC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACZ,eAAe,CAAC;IAC9C,CAAC;IA5CG,IAAI,CAACM,KAAK,GAAG;MACTC,QAAQ,EAAE,KAAK;MACfJ,YAAY,EAAE;IAClB,CAAC;EACL;EAEAU,iBAAiB,GAAG;IAChB,IAAI,CAACC,SAAS,EAAE;IAChB,IAAI,CAACC,YAAY,EAAE;EACvB;EAEAD,SAAS,GAAG;IACR,MAAM;MAAEE;IAAM,CAAC,GAAG,IAAI,CAACjB,KAAK;IAC5BU,MAAM,CAACQ,WAAW,GAAG,MAAM;MAC3BR,MAAM,CAACC,EAAE,CAACQ,IAAI,CAAC;QAAEF;MAAM,CAAC,CAAC;MACzB,IAAI,CAACd,QAAQ,CAAC;QAAEK,QAAQ,EAAE;MAAK,CAAC,CAAC;IACjC,CAAC;EACL;EAEAY,SAAS,GAAG;IACR,IAAI,CAACjB,QAAQ,CAAC;MAAEK,QAAQ,EAAE;IAAK,CAAC,CAAC;EACrC;EAEAQ,YAAY,GAAG;IACX,MAAMK,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC3CF,EAAE,CAACG,IAAI,GAAG,iBAAiB;IAC3BH,EAAE,CAACI,GAAG,GAAG,mCAAmC;IAC5CJ,EAAE,CAACK,KAAK,GAAG,IAAI;IACfL,EAAE,CAACM,EAAE,GAAG,QAAQ;IAChBL,QAAQ,CAACM,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACR,EAAE,CAAC;EAC5D;EAgBAS,MAAM,GAAG;IACL,MAAM;MAAErB,QAAQ;MAAEJ,QAAQ;MAAEY,KAAK;MAAEc,cAAc;MAAE,GAAGC;IAAY,CAAC,GAAG,IAAI,CAAChC,KAAK;IAChF,oBACA;MAAM,KAAK,EAAE+B,cAAe;MAAA,uBACxB;QAAA,GACIC,WAAW;QACf,OAAO,EAAE,IAAI,CAAC1B;MAAY;QAAA;QAAA;QAAA;MAAA;IAEhB;MAAA;MAAA;MAAA;IAAA,QACP;EAEX;AACJ;AAEAR,MAAM,CAACmC,SAAS,GAAG;EACjBxB,QAAQ,EAAEZ,SAAS,CAACqC,IAAI;EACxB7B,QAAQ,EAAER,SAAS,CAACsC,IAAI,CAACC,UAAU;EACnCnB,KAAK,EAAEpB,SAAS,CAACwC,MAAM,CAACD,UAAU;EAClCL,cAAc,EAAElC,SAAS,CAACyC;AAC5B,CAAC;AAED,eAAexC,MAAM"},"metadata":{},"sourceType":"module"}